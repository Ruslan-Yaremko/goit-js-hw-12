{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '50362686-a19d598e286bdc8c634e59341';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page = 1, perPage = 15) {\n  const response = await fetch(\n    `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`\n  );\n\n  if (!response.ok) {\n    throw new Error('Failed to fetch images');\n  }\n\n  return await response.json();\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nexport const lightbox = new SimpleLightbox('.gallery a');\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <a href=\"${largeImageURL}\" class=\"gallery-item\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n        <div class=\"image-info\">\n          <div class=\"info-block\">\n            <p class=\"info-label\">Likes</p>\n            <p class=\"info-value\">${likes}</p>\n          </div>\n          <div class=\"info-block\">\n            <p class=\"info-label\">Views</p>\n            <p class=\"info-value\">${views}</p>\n          </div>\n          <div class=\"info-block\">\n            <p class=\"info-label\">Comments</p>\n            <p class=\"info-value\">${comments}</p>\n          </div>\n          <div class=\"info-block\">\n            <p class=\"info-label\">Downloads</p>\n            <p class=\"info-value\">${downloads}</p>\n          </div>\n        </div>\n      </a>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('hidden');\n}\n","import { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nconst form = document.querySelector('#search-form');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst endMessage = document.querySelector('.end-message');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nform.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  const query = e.target.elements.searchQuery.value.trim();\n  if (!query) return;\n\n  currentQuery = query;\n  currentPage = 1;\n  clearGallery();\n  hideLoadMoreButton();\n  endMessage.classList.add('hidden');\n\n  await fetchImages();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  await fetchImages();\n});\n\nasync function fetchImages() {\n  try {\n    showLoader();\n    const { hits, totalHits: total } = await getImagesByQuery(currentQuery, currentPage);\n    totalHits = total;\n\n    createGallery(hits);\n    hideLoader();\n\n    const totalLoaded = document.querySelectorAll('.gallery-item').length;\n\n    if (totalLoaded < totalHits) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      endMessage.classList.remove('hidden');\n    }\n\n    if (currentPage > 1) {\n      scrollGallery();\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction scrollGallery() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","perPage","response","gallery","loadMoreBtn","loader","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","endMessage","currentPage","currentQuery","totalHits","e","fetchImages","hits","total","scrollGallery","error","cardHeight"],"mappings":"svBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAiBC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CACpE,MAAMC,EAAW,MAAM,MACrB,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAAmBG,CAAK,CAAC,iEAAiEC,CAAI,aAAaC,CAAO,EACnJ,EAED,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,wBAAwB,EAG1C,OAAO,MAAMA,EAAS,KAAM,CAC9B,CCVA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAS,SAAS,cAAc,SAAS,EAElCC,EAAW,IAAIC,EAAe,YAAY,EAEhD,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACC,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KAAgB;AAAA,iBACnEL,CAAa;AAAA,oBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,oCAIVC,CAAK;AAAA;AAAA;AAAA;AAAA,oCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,oCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,oCAIRC,CAAS;AAAA;AAAA;AAAA,WAI7C,EACK,KAAK,EAAE,EAEVd,EAAQ,mBAAmB,YAAaO,CAAM,EAC9CJ,EAAS,QAAS,CACpB,CAEO,SAASY,GAAe,CAC7Bf,EAAQ,UAAY,EACtB,CAEO,SAASgB,GAAa,CAC3Bd,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEO,SAASe,GAAa,CAC3Bf,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEO,SAASgB,GAAqB,CACnCjB,EAAY,UAAU,OAAO,QAAQ,CACvC,CAEO,SAASkB,GAAqB,CACnClB,EAAY,UAAU,IAAI,QAAQ,CACpC,CCjDA,MAAMmB,EAAO,SAAS,cAAc,cAAc,EAC5CnB,EAAc,SAAS,cAAc,YAAY,EACjDoB,EAAa,SAAS,cAAc,cAAc,EAExD,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAY,EAEhBJ,EAAK,iBAAiB,SAAU,MAAOK,GAAM,CAC3CA,EAAE,eAAgB,EAClB,MAAM7B,EAAQ6B,EAAE,OAAO,SAAS,YAAY,MAAM,KAAM,EACnD7B,IAEL2B,EAAe3B,EACf0B,EAAc,EACdP,EAAc,EACdI,EAAoB,EACpBE,EAAW,UAAU,IAAI,QAAQ,EAEjC,MAAMK,EAAa,EACrB,CAAC,EAEDzB,EAAY,iBAAiB,QAAS,SAAY,CAChDqB,GAAe,EACf,MAAMI,EAAa,CACrB,CAAC,EAED,eAAeA,GAAc,CAC3B,GAAI,CACFV,EAAY,EACZ,KAAM,CAAE,KAAAW,EAAM,UAAWC,CAAO,EAAG,MAAMjC,EAAiB4B,EAAcD,CAAW,EACnFE,EAAYI,EAEZvB,EAAcsB,CAAI,EAClBV,EAAY,EAEQ,SAAS,iBAAiB,eAAe,EAAE,OAE7CO,EAChBN,EAAoB,GAEpBC,EAAoB,EACpBE,EAAW,UAAU,OAAO,QAAQ,GAGlCC,EAAc,GAChBO,EAAe,CAElB,OAAQC,EAAO,CACd,QAAQ,MAAMA,CAAK,CACvB,CACA,CAEA,SAASD,GAAgB,CACvB,KAAM,CAAE,OAAQE,GAAe,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAuB,EAE5C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}